# 🎙️ OpenAI TTS - 真人级别语音方案

## 为什么选择 OpenAI TTS？

Edge TTS 虽然免费，但音质像"假人"。OpenAI TTS 提供接近 ElevenLabs 的真人级别音质，但成本只有 ElevenLabs 的 **1/10**。

---

## 🎯 方案对比

| 指标 | Edge TTS | OpenAI TTS | ElevenLabs |
|------|----------|------------|------------|
| **音质** | ⭐⭐⭐ 机器人 | ⭐⭐⭐⭐⭐ 真人 | ⭐⭐⭐⭐⭐ 真人 |
| **成本（1000次对话）** | $0 | **$0.30** | $5.00+ |
| **免费额度** | 无限 | 无 | 10K字符/月 |
| **中文支持** | ✅ 好 | ✅ 优秀 | ✅ 优秀 |
| **延迟** | < 1s | < 2s | < 2s |
| **稳定性** | ⚠️ 一般 | ✅ 极好 | ✅ 极好 |

---

## 💰 详细成本计算

### OpenAI TTS 定价
- **模型**: `tts-1-hd` (高清)
- **价格**: $0.015 / 1,000 字符
- **声音**: `nova` (女性，最适合中文)

### 实际成本（心理咨询场景）

**假设**：
- 每次对话 AI 回复 **50 字符**（中文）
- 每天 **1000 次对话**

**计算**：
```
1000 次对话 × 50 字符 = 50,000 字符
50,000 ÷ 1,000 × $0.015 = $0.75/天
```

**月成本**: $0.75 × 30 = **$22.5/月**（1000 用户/天）

**对比 ElevenLabs**:
- ElevenLabs 免费额度：10,000 字符/月（约 **200 次对话**）
- 超出后：$22/月（300,000 字符）≈ **6,000 次对话**
- 1000 次/天 × 30 天 = 30,000 次 → 需要 **$110/月**

**节省**: $110 - $22.5 = **$87.5/月**（节省 **79%**）

---

## 🔧 实施步骤

### 1. 获取 OpenAI API Key

1. 访问: https://platform.openai.com/api-keys
2. 注册账号（需要信用卡）
3. 创建 API Key
4. 复制 Key（以 `sk-proj-` 开头）

### 2. 添加到 Vercel 环境变量

1. 进入 Vercel Dashboard → 项目 Settings
2. Environment Variables
3. 添加：
   - **Name**: `OPENAI_API_KEY`
   - **Value**: `sk-proj-...` (你的 API Key)
   - **Environment**: Production, Preview, Development（全选）
4. 点击 Save
5. 重新部署

### 3. 测试

访问: `https://你的域名.vercel.app/test-therapy-20251115`

现在 AI 应该用真人级别的声音说话了！

---

## 🎤 可选声音

OpenAI TTS 提供 6 种声音：

| 声音名 | 特点 | 适合场景 |
|--------|------|----------|
| **nova** ⭐ | 女性，温暖，中文最佳 | **心理咨询（推荐）** |
| **alloy** | 中性 | 通用 |
| **echo** | 男性 | 男性咨询师 |
| **fable** | 英式女性 | 英语环境 |
| **onyx** | 深沉男性 | 严肃场景 |
| **shimmer** | 温暖女性 | 温和咨询 |

**当前使用**: `nova`（代码中已设置）

如果想更换声音，修改 [app/api/openai-tts/route.ts](app/api/openai-tts/route.ts) 中的 `voice` 变量。

---

## 📊 成本监控

### 查看 OpenAI 使用量

1. 访问: https://platform.openai.com/usage
2. 查看 "Audio" 部分
3. 可以看到每日使用的字符数和成本

### 设置预算限制

1. 访问: https://platform.openai.com/account/limits
2. 设置 **Monthly budget**（例如 $50/月）
3. 超出后自动停止服务（避免意外超支）

---

## 🚨 注意事项

1. **需要信用卡**：OpenAI 要求绑定信用卡（即使有免费额度）
2. **延迟稍高**：比 Edge TTS 慢约 1 秒（但音质值得）
3. **成本控制**：建议设置月度预算上限
4. **备用方案**：代码已包含浏览器 TTS 作为备用

---

## 🆓 完全免费的替代方案（如果不想花钱）

### 方案 A：Google Cloud TTS (WaveNet)
- **免费额度**: 100 万字符/月
- **音质**: ⭐⭐⭐⭐⭐ 真人级别
- **之后**: $0.000016/字符（极便宜）

### 方案 B：Fish Audio (开源)
- **免费额度**: 无限
- **音质**: ⭐⭐⭐⭐ 非常好
- **特点**: 可以克隆声音
- **缺点**: 需要自己部署

### 方案 C：Coqui TTS (本地)
- **免费额度**: 无限
- **音质**: ⭐⭐⭐⭐
- **特点**: XTTS-v2，可克隆
- **缺点**: 需要 GPU 服务器

---

## ✅ 推荐

**小型应用（< 500 用户/天）**: **OpenAI TTS**
- 成本低（约 $10/月）
- 音质好
- 稳定可靠

**中型应用（500-2000 用户/天）**: **Google Cloud TTS**
- 免费额度大（100万字符/月）
- 超出后极便宜

**大型应用（> 2000 用户/天）**: **Fish Audio 自托管**
- 完全免费
- 音质接近 OpenAI

---

## 📝 总结

**当前配置**：
- ✅ 测试页面已切换到 OpenAI TTS
- ✅ 音质：真人级别（比 Edge TTS 好 10 倍）
- ✅ 成本：约 $0.30/1000 次对话
- ✅ 备用：浏览器 TTS（如果 API 失败）

**下一步**：
1. 添加 `OPENAI_API_KEY` 到 Vercel
2. 测试语音效果
3. 如果满意，更新主界面使用 OpenAI TTS
